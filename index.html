<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ Shutterized Hongbao DApp - çº¢åŒ…åº”ç”¨</title>
  <script src="https://cdn.jsdelivr.net/npm/web3/dist/web3.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <h1 class="title">ğŸ Shutterized Hongbao Gifting DApp - çº¢åŒ…èµ é€åº”ç”¨</h1>

    <!-- Sender Section -->
    <div id="sender-section" class="section hidden">
      <h2>Gong Xi Fa Cai! æ­å–œå‘è´¢ ğŸ‰</h2>

      <p>Send a time-locked Hangbao to fellow crypto and not-yet crypto friends and admirers. Secure, private, and unlocked whenever you want.</p>
      <p>å‘é€ä¸€ä¸ªæ—¶é—´é”å®šçš„çº¢åŒ…ç»™ä½ çš„åŠ å¯†æœ‹å‹æˆ–å°šæœªæ¥è§¦åŠ å¯†çš„æœ‹å‹å’Œä»°æ…•è€…ã€‚å®‰å…¨ã€ç§å¯†ï¼Œå¯éšæ—¶è§£é”ã€‚</p>

      <div class="disclaimer-box">
        <strong>Disclaimer:</strong>
        <ul>
          <li>This is alpha stage, unaudited, and you should expect to lose everything.</li>
          <li>Itâ€™s non-custodial with no server functionality; the private key is in the link, so handle with care.</li>
          <li>This app is fully open source and free; whoever hosts it cannot be held liable. Use at your own risk.</li>
        </ul>
      </div>
      
      <div class="hongbao-envelope">
        <label for="hongbao-amount">ğŸ’° Amount (XDAI):</label>
        <input type="number" id="hongbao-amount" class="input" step="0.01" placeholder="Enter amount">
        
        <label for="unlock-time">â° Select Unlock Time:</label>
      <select id="unlock-time" class="input">
        <option value="60">1 minute from now</option>
        <option value="300">5 minutes from now</option>
        <option value="1800">30 minutes from now</option>
        <option value="lunar-new-year">Lunar New Year (Jan 29, 2025, 12:36 UTC)</option>
        <option value="custom">Custom</option>
      </select>

      <div id="custom-timestamp-container" class="hidden">
        <label for="custom-timestamp">Enter Custom Date/Time:</label>
        <input type="datetime-local" id="custom-timestamp" class="input">
      </div>


        <label for="hongbao-password">ğŸ”’ Password (optional):</label>
        <input type="password" id="hongbao-password" class="input" placeholder="Enter a password to protect the Hongbao">
        
        <button id="create-hongbao" class="button">Create Hongbao with MetaMask / ä½¿ç”¨ MetaMask åˆ›å»ºçº¢åŒ…</button>

        <button id="create-hongbao-with-passkey" class="button">Fund Hongbao with Passkey Wallet / ä½¿ç”¨ Passkey é’±åŒ…å……å€¼çº¢åŒ…</button>

        
        <p>Note, the receiver doesn't need any funds, nor a wallet to claim</p>
        <p id="hongbao-details" class="details hidden"></p>
        <p id="hongbao-link" class="link hidden"></p>
        <div id="hongbao-visual" class="hongbao-visual hidden"></div>
      </div>
    </div>

    <!-- Receiver Section -->
    <div id="receiver-section" class="section hidden">
      <h2>Gong Xi Fa Cai! æ­å–œå‘è´¢ ğŸ‰</h2>
      <p class="details">
        Someone gifted you a Hongbao with some xDAI on Gnosis Chain! This Hongbao is locked until Lunar New Year (or some other time that the sender has chosen)! It was encrypted with Shutter, and will unlock exactly on time thanks to encryption and decryption magic!
        <br>
        <a href="https://www.shutter.network/" target="_blank" rel="noopener noreferrer" class="shutter-link">
          Curious how it works? Learn more about Shutterâ€™s threshold encryption here!
        </a>
      </p>
      <p class="details">
        æœ‰äººé€äº†ä½ ä¸€ä¸ªåŒ…å« xDAI çš„çº¢åŒ…ï¼ŒåŸºäº Gnosis Chainï¼è¿™ä¸ªçº¢åŒ…é”å®šè‡³æ˜¥èŠ‚ï¼ˆæˆ–å‘é€è€…é€‰æ‹©çš„å…¶ä»–æ—¶é—´ï¼‰ï¼çº¢åŒ…ä½¿ç”¨ Shutter åŠ å¯†æŠ€æœ¯åŠ å¯†ï¼Œç¡®ä¿åœ¨æ­£ç¡®çš„æ—¶é—´è§£é”ï¼Œé çš„æ˜¯åŠ å¯†å’Œè§£å¯†çš„é­”æ³•ï¼
        <br>
        <a href="https://www.shutter.network/" target="_blank" rel="noopener noreferrer" class="shutter-link">
            å¥½å¥‡å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿäº†è§£æ›´å¤šå…³äº Shutter çš„é˜ˆå€¼åŠ å¯†ï¼
        </a>
    </p>
    
      <div class="disclaimer-box">
        <strong>Disclaimer:</strong>
        <ul>
          <li>This is alpha stage, unaudited, and you should expect to lose everything.</li>
          <li>Itâ€™s non-custodial with no server functionality; the private key is in the link, so handle with care.</li>
          <li>This app is fully open source and free; whoever hosts it cannot be held liable. Use at your own risk.</li>
        </ul>
      </div>
      
      <div class="hongbao-envelope">
<label for="hongbao-key" class="secondary-label">ğŸ”‘ Encrypted Key:</label>
<input type="text" id="hongbao-key" class="input secondary-input" placeholder="Paste encrypted key from link">

<label for="hongbao-timestamp" class="secondary-label">â° Timestamp:</label>
<input type="text" id="hongbao-timestamp" class="input secondary-input" placeholder="Paste timestamp from link">

        
        <div id="password-container" class="hidden">
          <label for="redeem-password">ğŸ”‘ Password (if protected):</label>
          <input type="password" id="redeem-password" class="input" placeholder="Enter the password">
          <button id="decrypt-password" class="button">Decrypt with Password</button>
        </div>
        
        
        
        <h3>Countdown to Unlock:</h3>
        <p id="countdown" class="countdown"></p>
        

        <div id="redemption-options">
          <button id="redeem-new-wallet" class="button hidden">Claim to New Wallet / é¢†å–åˆ°æ–°é’±åŒ…</button>

          <button id="toggle-other-options" class="button small hidden">Other Claiming Options</button>
          <div id="other-claim-options" class="hidden">
            <button id="redeem-existing-wallet" class="button">Claim to an Existing Wallet</button>
            <button id="redeem-hongbao" class="button">Redeem to MetaMask</button>
          </div>
        </div>
        
        
        <p id="redemption-details" class="details hidden"></p>
        <p id="redeem-result" class="details hidden"></p>
        <div id="hongbao-visual-redeem" class="hongbao-visual hidden"></div>
      </div>
      
      <div id="create-own-section">
        <button id="create-own-hongbao" class="button">Create Your Own Hongbao / åˆ›å»ºè‡ªå·±çš„çº¢åŒ…</button>

      </div>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/ethers/dist/ethers.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  <script type="module" src="app.js"></script>
  <script type="application/javascript" src="blst/blst.js"></script>
<script type="module" src="encryptDataBlst.js"></script>
<script type="module" src="main.js"></script>
</body>
</html>
